# 动态扩容

当散列表中的数据频繁变动时，我们无法事先知道数据的个数，因此也无法事先申请一块足够大的内存。随着数据加入，填入表中的元素个数增多，装载因子增大，当装载因子达到一定程度时，散列冲突便不可接受，我们也无法事先根据数据的特征和分布情况设计出符合这些数据的 Hash 函数，而是需要动态扩容，重新申请一个更大的 Hash 表，将数据重新存储到新的 Hash 表中。

- 动态扩容

当数据插入到 Hash表时，如果装载因子还未达到临界值，此时还不需要扩容，插入的数据非常快，但如果装载因子达到了临界值，这是就需要先进行扩容，然后再插入数据，这个时候就会变得很慢。

- 动态缩容

当数据需要从 Hash表中删除时，如果 Hash表已经经历过扩容，随着数据的删除，空闲空间会越来越多。当程序对内存空间非常敏感时，可以设置当装载因子小于某个临界值时，启动动态缩容，让内容空间得到充分利用；当程序对内存空间不太敏感时，就不需要进行动态缩容处理。

## 动态扩容策略

为了减少动态扩容耗时，我们可以将扩容的操作穿插在插入操作过程中。

这样每次插入时迁移一个数据，没有集中一次性迁移数据那样耗时，不会形成明显的阻塞。

由于迁移过程中，有新旧两个 Hash表，查找数据时，先在新的 Hash表中进行查找，如果没有，再去旧的 Hash表中进行查找。